---
title: 'DATA 607:  Web APIs; Week 9'
author: "Walt Wells, Fall 2016"
output:
  html_document:
    theme: lumen
    toc: yes
  pdf_document:
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Abstract

Our task is to choose one of the New York Times APIs, construct an interface in R to read in the JSON data, and transform it to an R dataframe. 

# Environment Prep
```{r, warning=FALSE, message=FALSE}
if (!require('rvest')) install.packages('rvest')
if (!require('XML')) install.packages('XML')
if (!require('jsonlite')) install.packages('jsonlite')
```

# Importing

Let's use the Top StoriesI API.    

## Key Reference 

Source key, add to gitignore (nytapi.r)

```{r}
source("configAPI.R")

```

## JSON
```{r}
j <- fromJSON("books.json")
j.df <- do.call("rbind", lapply(j, data.frame, stringsAsFactors=FALSE))
rownames(j.df) <- NULL
knitr::kable(j.df)
```

# Testing Similarity

They all look equivalent to the eye, but are they?   We can use the base package function 'all.equal' to test.    

## HTML to XML
```{r}
all.equal(h.df, x.df)
```

## HTML to JSON
```{r}
all.equal(h.df, j.df)
```

## XML to JSON
```{r}
all.equal(x.df, j.df)
```

# Conclusion
While the characters in each of the data frames are essentially the same, it would take some additional work to make them completely equivalent.  The classes have slight differences, most notably the xml import method resulted in each variable being a factor.  